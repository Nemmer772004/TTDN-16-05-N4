<odoo>
    <data>
        <!-- Form View - ƒêƒÉng k√Ω m∆∞·ª£n ph√≤ng -->
        <record id="view_dat_phong_form" model="ir.ui.view">
            <field name="name">dat_phong_form</field>
            <field name="model">dat_phong</field>
            <field name="arch" type="xml">
                <form string="üìã Chi ti·∫øt ƒêƒÉng K√Ω M∆∞·ª£n Ph√≤ng">
                    <header>
                        <!-- Thanh tr·∫°ng th√°i -->
                        <field name="trang_thai" widget="statusbar" statusbar_visible="ch·ªù_duy·ªát,ƒë√£_duy·ªát,ƒëang_s·ª≠_d·ª•ng,ƒë√£_tr·∫£"/>
                        
                        <!-- C√°c n√∫t h√†nh ƒë·ªông -->
                        <button name="xac_nhan_duyet_phong" string="‚úÖ Duy·ªát ph√≤ng" type="object" 
                                class="oe_highlight" attrs="{'invisible': [('trang_thai', '!=', 'ch·ªù_duy·ªát')]}"/>
                        <button name="huy_muon_phong" string="‚ùå T·ª´ ch·ªëi" type="object" 
                                attrs="{'invisible': [('trang_thai', '!=', 'ch·ªù_duy·ªát')]}"/>
                        <button name="bat_dau_su_dung" string="üöÄ B·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng" type="object" 
                                class="oe_highlight" attrs="{'invisible': [('trang_thai', '!=', 'ƒë√£_duy·ªát')]}"/>
                        <button name="tra_phong" string="ÔøΩ Tr·∫£ ph√≤ng" type="object" 
                                class="oe_highlight" attrs="{'invisible': [('trang_thai', '!=', 'ƒëang_s·ª≠_d·ª•ng')]}"/>
                    </header>
                    
                    <sheet>
                        <!-- Th√¥ng tin t√≥m t·∫Øt ·ªü ƒë·∫ßu -->
                        <div class="oe_title">
                            <h1>
                                <field name="phong_id" placeholder="Ch·ªçn ph√≤ng h·ªçp..." options="{'no_create': True}"/>
                            </h1>
                        </div>
                        
                        <group col="4">
                            <!-- C·ªôt tr√°i: Th√¥ng tin ng∆∞·ªùi m∆∞·ª£n -->
                            <group string="üë§ TH√îNG TIN NG∆Ø·ªúI M∆Ø·ª¢N">
                                <field name="nguoi_muon_id" options="{'no_create': True}"/>
                                <field name="ly_do" placeholder="VD: H·ªçp team, ƒê√†o t·∫°o, S·ª± ki·ªán..."/>
                            </group>
                            
                            <!-- C·ªôt ph·∫£i: Th√¥ng tin ph√≤ng -->
                            <group string="üè¢ TH√îNG TIN PH√íNG H·ªåP">
                                <field name="phong_vi_tri" string="üìç V·ªã tr√≠"/>
                                <field name="phong_suc_chua" string="üë• S·ª©c ch·ª©a"/>
                                <field name="phong_don_gia" string="üí∞ ƒê∆°n gi√°/gi·ªù (VNƒê)"/>
                                <field name="chi_phi" string="üíµ Chi ph√≠ d·ª± ki·∫øn (VNƒê)"/>
                                <field name="thoi_gian_su_dung_gio" string="‚è±Ô∏è Th·ªùi gian (gi·ªù)"/>
                            </group>
                        </group>

                        <group col="4">
                            <group string="üìÖ TH·ªúI GIAN D·ª∞ KI·∫æN">
                                <field name="thoi_gian_muon_du_kien" string="‚è∞ B·∫Øt ƒë·∫ßu"/>
                                <field name="thoi_gian_tra_du_kien" string="‚è∞ K·∫øt th√∫c"/>
                                <field name="la_dat_dinh_ky" string="üîÑ ƒê·∫∑t ƒë·ªãnh k·ª≥"/>
                                <field name="tan_suat_lap" attrs="{'invisible': [('la_dat_dinh_ky', '=', False)]}"/>
                            </group>
                            
                            <group string="ÔøΩ ƒê√ÅNH GI√Å &amp; GHI CH√ö">
                                <field name="danh_gia" widget="priority" 
                                       attrs="{'invisible': [('trang_thai', '!=', 'ƒë√£_tr·∫£')]}"/>
                                <field name="ghi_chu" placeholder="Ghi ch√∫ th√™m v·ªÅ y√™u c·∫ßu ƒë·∫∑c bi·ªát..."/>
                            </group>
                        </group>

                        <notebook>
                            <!-- Tab 1: Thi·∫øt b·ªã k√®m theo -->
                            <page string="üîß THI·∫æT B·ªä/T√ÄI S·∫¢N M∆Ø·ª¢N">
                                <group>
                                    <field name="thiet_bi_ids" widget="many2many_tags" 
                                           domain="[('vi_tri', 'in', ['kho', 'dang_su_dung']), ('tinh_trang', 'not in', ['hong', 'da_thanh_ly', 'cho_thanh_ly'])]"
                                           options="{'color_field': 'tinh_trang', 'no_create': True}"/>
                                </group>
                                
                                <!-- Hi·ªÉn th·ªã chi ti·∫øt thi·∫øt b·ªã/t√†i s·∫£n -->
                                <group string="üìã Chi ti·∫øt t√†i s·∫£n m∆∞·ª£n" col="1">
                                    <field name="thiet_bi_ids" nolabel="1" mode="tree">
                                        <tree>
                                            <field name="ma_tai_san" string="üè∑Ô∏è M√£ t√†i s·∫£n"/>
                                            <field name="name" string="ÔøΩ T√™n t√†i s·∫£n"/>
                                            <field name="loai_tai_san" string="ÔøΩ Lo·∫°i"/>
                                            <field name="ngay_mua" string="üìÖ Ng√†y mua"/>
                                            <field name="gia_tri" string="ÔøΩ Gi√° tr·ªã (VNƒê)"/>
                                            <field name="gia_tri_con_lai" string="ÔøΩ Gi√° tr·ªã c√≤n l·∫°i (VNƒê)"/>
                                            <field name="tinh_trang" string="üìä T√¨nh tr·∫°ng"
                                                   decoration-success="tinh_trang=='dang_su_dung'"
                                                   decoration-warning="tinh_trang=='bao_tri'"
                                                   decoration-info="tinh_trang=='cho_muon'"
                                                   decoration-danger="tinh_trang=='hong'"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                            
                            <!-- Tab 2: L·ªãch s·ª≠ s·ª≠ d·ª•ng -->
                            <page string="üìä L·ªäCH S·ª¨ S·ª¨ D·ª§NG">
                                <field name="chi_tiet_su_dung_ids" nolabel="1">
                                    <tree>
                                        <field name="nguoi_muon_id" string="üë§ Ng∆∞·ªùi m∆∞·ª£n"/>
                                        <field name="phong_id" string="üè¢ Ph√≤ng h·ªçp"/>
                                        <field name="thoi_gian_muon_thuc_te" string="‚è∞ M∆∞·ª£n th·ª±c t·∫ø"/>
                                        <field name="thoi_gian_tra_thuc_te" string="‚è±Ô∏è Tr·∫£ th·ª±c t·∫ø"/>
                                        <field name="thoi_gian_su_dung" string="‚è≤Ô∏è Th·ªùi gian s·ª≠ d·ª•ng"/>
                                    </tree>
                                </field>
                            </page>
                            
                            <!-- Tab 3: H√¨nh ·∫£nh -->
                            <page string="üì∑ H√åNH ·∫¢NH" attrs="{'invisible': [('trang_thai', 'in', ['ch·ªù_duy·ªát', 'ƒë√£_h·ªßy'])]}">
                                <group>
                                    <field name="hinh_anh" widget="image" class="oe_avatar"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    
                    <!-- Chatter - Theo d√µi & Ghi ch√∫ -->
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!-- Tree View - Danh s√°ch ƒêƒÉng k√Ω m∆∞·ª£n ph√≤ng -->
        <record id="view_dat_phong_tree" model="ir.ui.view">
            <field name="name">dat_phong_tree</field>
            <field name="model">dat_phong</field>
            <field name="arch" type="xml">
                <tree string="üìã Danh s√°ch ƒêƒÉng K√Ω M∆∞·ª£n Ph√≤ng">
                    <field name="phong_id" string="üè¢ Ph√≤ng h·ªçp"/>
                    <field name="nguoi_muon_id" string="üë§ Ng∆∞·ªùi m∆∞·ª£n"/>
                    <field name="thoi_gian_muon_du_kien" string="‚è≥ M∆∞·ª£n d·ª± ki·∫øn"/>
                    <field name="thoi_gian_tra_du_kien" string="üìÜ Tr·∫£ d·ª± ki·∫øn"/>
                    <field name="trang_thai" string="üìå Tr·∫°ng th√°i"
                           decoration-muted="trang_thai=='ƒë√£_h·ªßy'"
                           decoration-danger="trang_thai=='ƒëang_s·ª≠_d·ª•ng'"
                           decoration-info="trang_thai=='ƒë√£_duy·ªát'"
                           decoration-success="trang_thai=='ch·ªù_duy·ªát'"/>

                    <!-- N√∫t h√†nh ƒë·ªông -->
                    <button name="xac_nhan_duyet_phong" string="‚úÖ Duy·ªát" type="object" class="btn-primary"
                        attrs="{'invisible': [('trang_thai', '!=', 'ch·ªù_duy·ªát')]}"/>
                    <button name="huy_muon_phong" string="‚ùå H·ªßy" type="object" class="btn-danger"
                        attrs="{'invisible': [('trang_thai', '!=', 'ch·ªù_duy·ªát')]}"/>
                    <button name="bat_dau_su_dung" string="üöÄ B·∫Øt ƒë·∫ßu" type="object" class="btn-success"
                        attrs="{'invisible': [('trang_thai', '!=', 'ƒë√£_duy·ªát')]}"/>
                    <button name="huy_da_duyet" string="üõë H·ªßy" type="object" class="btn-warning"
                        attrs="{'invisible': [('trang_thai', '!=', 'ƒë√£_duy·ªát')]}"/>
                    <button name="tra_phong" string="üè† Tr·∫£ ph√≤ng" type="object" class="btn-info"
                        attrs="{'invisible': [('trang_thai', '!=', 'ƒëang_s·ª≠_d·ª•ng')]}"/>
                </tree>
            </field>
        </record>

        <!-- Search View - B·ªô l·ªçc t√¨m ki·∫øm -->
        <record model="ir.ui.view" id="dat_phong_search">
            <field name="model">dat_phong</field>
            <field name="arch" type="xml">
                <search string="üîç T√¨m ki·∫øm ƒêƒÉng K√Ω M∆∞·ª£n Ph√≤ng">
                    <field name="phong_id" string="üè¢ Ph√≤ng h·ªçp"/>
                    <field name="nguoi_muon_id" string="üë§ Ng∆∞·ªùi m∆∞·ª£n"/>
                    <field name="thoi_gian_muon_du_kien" string="‚è≥ M∆∞·ª£n d·ª± ki·∫øn"/>
                    <field name="thoi_gian_tra_du_kien" string="üìÜ Tr·∫£ d·ª± ki·∫øn"/>
                    <field name="trang_thai" string="üìå Tr·∫°ng th√°i"/>
                </search>
            </field>
        </record>

        <!-- Action - Danh s√°ch t·∫•t c·∫£ ƒëƒÉng k√Ω -->
        <record id="action_dat_phong" model="ir.actions.act_window">
            <field name="name">üìã Danh s√°ch ƒêƒÉng K√Ω M∆∞·ª£n Ph√≤ng</field>
            <field name="res_model">dat_phong</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="dat_phong_search"/>
        </record>

        <!-- Action - Danh s√°ch Ch·ªù duy·ªát -->
        <record id="action_dat_phong_cho_duyet" model="ir.actions.act_window">
            <field name="name">üìã Danh s√°ch Ch·ªù Duy·ªát</field>
            <field name="res_model">dat_phong</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="dat_phong_search"/>
            <field name="domain">[("trang_thai", "=", "ch·ªù_duy·ªát")]</field>
        </record>

        <!-- Action - Danh s√°ch ƒê√£ duy·ªát -->
        <record id="action_dat_phong_da_duyet" model="ir.actions.act_window">
            <field name="name">üìã Danh s√°ch ƒê√£ Duy·ªát</field>
            <field name="res_model">dat_phong</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="dat_phong_search"/>
            <field name="domain">[("trang_thai", "=", "ƒë√£_duy·ªát")]</field>
        </record>

        <!-- Action - Danh s√°ch ƒêang s·ª≠ d·ª•ng -->
        <record id="action_dat_phong_dang_su_dung" model="ir.actions.act_window">
            <field name="name">üìã Danh s√°ch Ph√≤ng ƒêang S·ª≠ D·ª•ng</field>
            <field name="res_model">dat_phong</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="dat_phong_search"/>
            <field name="domain">[("trang_thai", "=", "ƒëang_s·ª≠_d·ª•ng")]</field>
        </record>

        <!-- Action - Danh s√°ch ƒê√£ h·ªßy -->
        <record id="action_dat_phong_da_huy" model="ir.actions.act_window">
            <field name="name">üìã Danh s√°ch ƒê√£ H·ªßy</field>
            <field name="res_model">dat_phong</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="dat_phong_search"/>
            <field name="domain">[("trang_thai", "=", "ƒë√£_h·ªßy")]</field>
        </record>
    </data>
</odoo>
